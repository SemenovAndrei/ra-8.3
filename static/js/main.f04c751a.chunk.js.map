{"version":3,"sources":["contexts/AuthContext.js","hooks/useStorage.js","components/AuthProvider/AuthProvider.jsx","components/Content/Content.jsx","components/FormLogin/FormLogin.jsx","components/ProfileBar/ProfileBar.jsx","components/Header/Header.jsx","App.js","reportWebVitals.js","index.js"],"names":["AuthContext","createContext","login","password","error","token","profile","useStorage","storage","key","jsonify","useState","JSON","parse","getItem","value","setValue","useEffect","setItem","stringify","removeItem","AuthProvider","props","setError","setLogin","setPassword","news","setNews","localStorage","setToken","setProfile","handleLogin","a","fetch","process","method","headers","body","response","ok","json","Error","message","loadProfile","url","setState","Authorization","state","Provider","handleInputLogin","handleInputPassword","pass","handleLogout","children","Element","styled","div","NewsWrapper","News","Img","img","ContentWrapper","Content","useContext","map","newsItem","src","image","alt","title","content","id","form","Input","input","Button","button","FormLogin","buttonLogin","useRef","name","placeholder","onChange","event","target","type","ref","onClick","preventDefault","current","blur","Circle","ProfileBar","avatar","Wrapper","Logo","Header","App","className","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f04c751a.chunk.js","sourcesContent":["import { createContext } from 'react'\n\nconst AuthContext = createContext({\n  login: '',\n  password: '',\n  error: '',\n  token: null,\n  profile: null,\n})\n\nexport default AuthContext\n","import { useState, useEffect } from 'react'\n\nexport default function useStorage(storage, key, jsonify = false) {\n  const [value, setValue] = useState(\n    jsonify ? JSON.parse(storage.getItem(key)) : storage.getItem(key)\n  )\n  useEffect(() => {\n    if (value === null) {\n      storage.removeItem(key)\n      return\n    }\n\n    storage.setItem(key, jsonify ? JSON.stringify(value) : value)\n  }, [value, storage, key, jsonify])\n\n  return [value, setValue]\n}\n","import { useEffect, useState } from 'react'\nimport AuthContext from '../../contexts/AuthContext'\nimport useStorage from '../../hooks/useStorage'\n\nexport default function AuthProvider(props) {\n  const [error, setError] = useState('')\n  const [login, setLogin] = useState('')\n  const [password, setPassword] = useState('')\n  const [news, setNews] = useState('')\n\n  const [token, setToken] = useStorage(localStorage, 'token')\n  const [profile, setProfile] = useStorage(localStorage, 'profile', true)\n\n  const handleInputLogin = (login) => {\n    setLogin(login)\n  }\n\n  const handleInputPassword = (pass) => {\n    setPassword(pass)\n  }\n\n  const handleLogin = async () => {\n    setError('')\n    try {\n      const response = await fetch(process.env.REACT_APP_URL_AUTH, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ login: login, password: password }),\n      })\n\n      if (!response.ok) {\n        const error = await response.json()\n        throw new Error('Auth failed: ' + error.message)\n      }\n\n      const { token } = await response.json()\n      setToken(token)\n    } catch (e) {\n      setError(e)\n    } finally {\n      setLogin('')\n      setPassword('')\n    }\n  }\n\n  const handleLogout = () => {\n    setNews('')\n    setToken(null)\n    setProfile(null)\n  }\n\n  useEffect(() => {\n    if (token) {\n      setError('')\n      const loadProfile = async (url, setState) => {\n        try {\n          const response = await fetch(url, {\n            headers: { Authorization: 'Bearer ' + token },\n          })\n\n          if (!response.ok) {\n            setNews('')\n            setToken(null)\n            setProfile(null)\n          }\n\n          const state = await response.json()\n          setState(state)\n        } catch (e) {\n          setError(e)\n        }\n      }\n\n      loadProfile(`${process.env.REACT_APP_URL_USER}/me`, setProfile)\n      loadProfile(`${process.env.REACT_APP_URL_USER}/news`, setNews)\n    }\n  }, [token, setProfile, setToken])\n\n  return (\n    <AuthContext.Provider\n      value={{\n        handleInputLogin,\n        handleInputPassword,\n        handleLogin,\n        handleLogout,\n        login,\n        password,\n        token,\n        profile,\n        error,\n        news,\n      }}\n    >\n      {props.children}\n    </AuthContext.Provider>\n  )\n}\n","import React, { useContext } from 'react'\nimport styled from 'styled-components'\nimport AuthContext from '../../contexts/AuthContext'\n\nconst Element = styled.div`\n  width: 1000px;\n  min-height: 400px;\n  margin: 20px auto;\n  padding: 10px 30px;\n  background-color: #fafafa;\n`\nconst NewsWrapper = styled.div`\n  width: 1000px;\n  margin: 20px auto;\n  padding: 10px 0;\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-between;\n`\nconst News = styled.div`\n  width: 47.5%;\n  border: 1px solid black;\n\n  :nth-child(n + 3) {\n    margin-top: 5%;\n  }\n`\nconst Img = styled.img`\n  display: block;\n  width: 100%;\n`\nconst ContentWrapper = styled.div`\n  padding: 10px;\n`\n\nexport default function Content() {\n  const { news } = useContext(AuthContext)\n\n  if (!news) {\n    return (\n      <Element>\n        <h1>Neto Social</h1>\n        <h3>Facebook and VK Killed</h3>\n      </Element>\n    )\n  }\n\n  return (\n    <NewsWrapper>\n      {news.map((newsItem) => (\n        <News key={newsItem.id}>\n          <Img src={newsItem.image} alt={newsItem.title} />\n          <ContentWrapper>\n            <h3>{newsItem.title}</h3>\n            <p>{newsItem.content}</p>\n          </ContentWrapper>\n        </News>\n      ))}\n    </NewsWrapper>\n  )\n}\n","import React, { useContext, useRef } from 'react'\nimport styled from 'styled-components'\nimport AuthContext from '../../contexts/AuthContext'\n\nconst Element = styled.form`\n  display: flex;\n  justify-content: space-between;\n`\nconst Input = styled.input`\n  width: 40%;\n  padding: 10px;\n`\nconst Button = styled.button`\n  width: 15%;\n  font-size: inherit;\n  color: green;\n  border: 1px solid green;\n  border-radius: 4px;\n  cursor: pointer;\n`\n\nfunction FormLogin(props) {\n  const {\n    login,\n    password,\n    handleLogin,\n    handleInputPassword,\n    handleInputLogin,\n  } = useContext(AuthContext)\n\n  const buttonLogin = useRef(null)\n\n  const onChangeLogin = (event) => {\n    handleInputLogin(event.target.value)\n  }\n\n  const onChangePassword = (event) => {\n    handleInputPassword(event.target.value)\n  }\n\n  const onSubmit = (event) => {\n    event.preventDefault()\n    buttonLogin.current.blur()\n    handleLogin()\n  }\n  return (\n    <Element>\n      <Input name=\"login\" placeholder=\"Username\" value={login} onChange={onChangeLogin} />\n      <Input\n        name=\"password\"\n        type=\"password\"\n        placeholder=\"Password\"\n        value={password}\n        onChange={onChangePassword}\n      />\n      <Button ref={buttonLogin} onClick={onSubmit}>\n        Login\n      </Button>\n    </Element>\n  )\n}\n\nexport default FormLogin\n","import React, { useContext } from 'react'\nimport styled from 'styled-components'\nimport AuthContext from '../../contexts/AuthContext'\n\nconst Element = styled.div`\n  width: 22%;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n`\nconst Circle = styled.div`\n  overflow: hidden;\n  border-radius: 50%;\n`\nconst Img = styled.img`\n  display: block;\n  object-fit: cover;\n`\nconst Button = styled.button`\n  width: 33%;\n  padding: 10px;\n  font-size: inherit;\n  color: red;\n  border: 1px solid red;\n  border-radius: 4px;\n  cursor: pointer;\n`\n\nfunction ProfileBar(props) {\n  const { profile, handleLogout } = useContext(AuthContext)\n\n  return (\n    <Element>\n      Hello, {profile.name}\n      <Circle>\n        <Img src={profile.avatar} alt={profile.name} />\n      </Circle>\n      <Button onClick={handleLogout}>Logout</Button>\n    </Element>\n  )\n}\n\nexport default ProfileBar\n","import React, { useContext } from 'react'\nimport FormLogin from '../FormLogin/FormLogin'\nimport styled from 'styled-components'\nimport AuthContext from '../../contexts/AuthContext'\nimport ProfileBar from '../ProfileBar/ProfileBar'\n\nconst Element = styled.div`\n  margin-top: 20px;\n  padding: 10px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background-color: #fafafa;\n`\nconst Wrapper = styled.div`\n  display: flex;\n  align-items: center;\n`\nconst Error = styled.div`\n  color: red;\n  margin-right: 10px;\n`\nconst Logo = styled.div`\n  font-weight: bold;\n  font-size: 1.5rem;\n`\n\nfunction Header(props) {\n  const { error, profile } = useContext(AuthContext)\n\n  return (\n    <Element>\n      <Logo>Neto Social</Logo>\n      {!profile ? (\n        <Wrapper>\n          <Error>{error.message}</Error>\n          <FormLogin />\n        </Wrapper>\n      ) : (\n        <ProfileBar />\n      )}\n    </Element>\n  )\n}\n\nexport default Header\n","import './App.css'\nimport AuthProvider from './components/AuthProvider/AuthProvider'\nimport Content from './components/Content/Content'\nimport Header from './components/Header/Header'\n\nfunction App() {\n  return (\n    <AuthProvider>\n      <div className=\"App\">\n        <Header />\n        <Content />\n      </div>\n    </AuthProvider>\n  )\n}\n\nexport default App\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}